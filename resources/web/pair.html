<html>
    <head>
        <title>
            Barcode Reader
        </title>
        <link rel="shortcut icon" href="img/logo_br.png">
        <link rel="stylesheet" href="css/index.css" >
    </head>
    <body>
        <img id="image" src="img/Loading.webp" width="50" height="50" class="centerbody">
        <a href="index.html" class="pair" style="position: absolute;bottom: 10px;left: 50%;-ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);">Back</a>
        <script>
            fetch("http://localhost:8080/generate-qr",{ method: 'GET', mode: 'cors'}) 
            .then(function (response) {
                response.json().then(function(data){
                    if(!data.status){
                        console.log('Success:', data);
                        document.getElementById("image").src = data.path;
                        document.getElementById("image").width = data.width;
                        document.getElementById("image").height = data.height;
                    }else{
                        console.error('Error:', data.error);
                        document.getElementById("image").src = "img/Error.png";
                    }
                });
            })
            .catch((error) => {
                console.error('Error:', error);
                document.getElementById("image").src = "img/Disc.png";
                        document.getElementById("image").width = 50;
                        document.getElementById("image").height = 50;
            });
        </script>
    </body>
</html>